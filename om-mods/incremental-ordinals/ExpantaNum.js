!function(r){"use strict";var e={rounding:4,maxOps:3,debug:0},t="[ExpantaNumError] ",n=t+"Invalid argument: ",a=/^[-\+]*(Infinity|NaN|(J+|J\^\d+ )?(10(\^+|\{[1-9]\d*\})|\(10(\^+|\{[1-9]\d*\})\)\^[1-9]\d* )*((\d+(\.\d*)?|\d*\.\d+)?([Ee][-\+]*))*(0|\d+(\.\d*)?|\d*\.\d+))$/,i=Math.log10(9007199254740991),o={},u={},s={ZERO:0,ONE:1};s.E=Math.E,s.LN2=Math.LN2,s.LN10=Math.LN10,s.LOG2E=Math.LOG2E,s.LOG10E=Math.LOG10E,s.PI=Math.PI,s.SQRT1_2=Math.SQRT1_2,s.SQRT2=Math.SQRT2,s.MAX_SAFE_INTEGER=9007199254740991,s.MIN_SAFE_INTEGER=Number.MIN_SAFE_INTEGER,s.NaN=Number.NaN,s.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY,s.POSITIVE_INFINITY=Number.POSITIVE_INFINITY,s.E_MAX_SAFE_INTEGER="e9007199254740991",s.EE_MAX_SAFE_INTEGER="ee9007199254740991",s.TETRATED_MAX_SAFE_INTEGER="10^^9007199254740991",s.GRAHAMS_NUMBER="J^63 10^^^(10^)^7625597484984 3638334640023.7783",o.absoluteValue=o.abs=function(){var r=this.clone();return r.sign=1,r},u.absoluteValue=u.abs=function(r){return new e(r).abs()},o.negate=o.neg=function(){var r=this.clone();return r.sign*=-1,r},u.negate=u.neg=function(r){return new e(r).neg()},o.compareTo=o.cmp=function(r){if(r=new e(r),isNaN(this.array[0][1])||isNaN(r.array[0][1]))return NaN;if(this.array[0][1]==1/0&&r.array[0][1]!=1/0)return this.sign;if(this.array[0][1]!=1/0&&r.array[0][1]==1/0)return-r.sign;if(1==this.array.length&&0===this.array[0][1]&&1==r.array.length&&0===r.array[0][1])return 0;if(this.sign!=r.sign)return this.sign;var t,n=this.sign;if(this.layer>r.layer)t=1;else if(this.layer<r.layer)t=-1;else{for(var a,i,o=0,u=Math.min(this.array.length,r.array.length);o<u;++o){if(a=this.array[this.array.length-1-o],i=r.array[r.array.length-1-o],a[0]>i[0]||a[0]==i[0]&&a[1]>i[1]){t=1;break}if(a[0]<i[0]||a[0]==i[0]&&a[1]<i[1]){t=-1;break}}void 0===t&&(t=this.array.length==r.array.length?0:this.array.length>r.array.length?(a=this.array[this.array.length-u])[0]>=1||a[1]>10?1:-1:(a=r.array[r.array.length-u])[0]>=1||a[1]>10?-1:1)}return t*n},u.compare=u.cmp=function(r,t){return new e(r).cmp(t)},o.greaterThan=o.gt=function(r){return this.cmp(r)>0},u.greaterThan=u.gt=function(r,t){return new e(r).gt(t)},o.greaterThanOrEqualTo=o.gte=function(r){return this.cmp(r)>=0},u.greaterThanOrEqualTo=u.gte=function(r,t){return new e(r).gte(t)},o.lessThan=o.lt=function(r){return this.cmp(r)<0},u.lessThan=u.lt=function(r,t){return new e(r).lt(t)},o.omegalog=function(r){var t=this.clone(),n=new e(r);if(t.layer>=1)return t.layer--,t;if(t.array[t.array.length-1][0]>=98)return new e(t.array[t.array.length-1][0]);if(n.pow(2).gte(t))return new e(0);for(var a=8,i=0;a>=1e-10;)e.arrFrac(n,i+a).lte(t)&&(i+=a),a/=2;return new e(i)},o.lessThanOrEqualTo=o.lte=function(r){return this.cmp(r)<=0},u.lessThanOrEqualTo=u.lte=function(r,t){return new e(r).lte(t)},o.hyperlog=function(r){var t=this.clone();r>=2.5&&(0==t.array[0][0]&&t.array[0][1]++,t=t.normalize());var n=t.array.length-1;return 1==r?t.log10():2==r?t.slog():t.array[n][0]>=r+1.5?t:t.array[n][0]==r+1&&t.array[n][1]>1.5?t:t.array[n][0]==r+1&&1==t.array[n][1]?e.arrow(10,r+1,t.hyperlog(r+1).minus(1)):t.array[n][0]==r&&t.array[n][1]>1.5?(t.array[n][1]--,t):t.array[n][0]==r&&1==t.array[n][1]?(t.array.pop(),t):t.array[n][0]==r-1?new e(t.array[n][1]+1):new e(t.gte(10)?1:0)},u.hyperlog=function(r,t){return new e(r).hyperlog(t)},o.simplify=function(){for(var r=this.clone();r.array.length>=3;)r.array.splice(1,1);return r},o.normalize=function(){var r=this.clone();r.array[0][1]=Math.round(r.array[0][1]),r.array[0][1]>=1e10-1&&(r.array[0][1]=10,1==r.array.length&&r.array.push([1,0]),r.array[1][1]++);for(var e=0,t=1;t<r.array.length;){if(r.array[t][1]>=9){e=r.array[t][0],r.array[0][1]=r.array[t][1]+1;for(var n=0;n<t;n++)r.array.splice(1,1);1==r.array.length&&r.array.push([e+1,0]),r.array[1][0]==e+1&&r.array[1][1]++,t--}t++}return void 0!==r.array[1]&&0==r.array[1][1]&&r.array.splice(1,1),r},o.equalsTo=o.equal=o.eq=function(r){return 0===this.cmp(r)},u.equalsTo=u.equal=u.eq=function(r,t){return new e(r).eq(t)},o.minimum=o.min=function(r){return this.lt(r)?this.clone():new e(r)},u.minimum=u.min=function(r,t){return new e(r).min(t)},o.maximum=o.max=function(r){return this.gt(r)?this.clone():new e(r)},u.arrFrac=function(r,t){var n=new e(r),a=new e(t);return e.arrow(n,a.floor().add(1),n.divide(2).pow(a.minus(a.floor())).times(2))},u.maximum=u.max=function(r,t){return new e(r).max(t)},o.isPositive=o.ispos=function(){return this.gt(e.ZERO)},u.isPositive=u.ispos=function(r){return new e(r).ispos()},o.isNegative=o.isneg=function(){return this.lt(e.ZERO)},u.isNegative=u.isneg=function(r){return new e(r).isneg()},o.isNaN=function(){return isNaN(this.array[0][1])},u.isNaN=function(r){return new e(r).isNaN()},o.isFinite=function(){return isFinite(this.array[0][1])},u.isFinite=function(r){return new e(r).isFinite()},o.isInfinite=function(){return this.array[0][1]==1/0},u.isInfinite=function(r){return new e(r).isInfinite()},o.isInteger=o.isint=function(){return-1==this.sign?this.abs().isint():!!this.gt(e.MAX_SAFE_INTEGER)||Number.isInteger(this.toNumber())},u.isInteger=u.isint=function(r){return new e(r).isint()},o.floor=function(){return this.isInteger()?this.clone():new e(Math.floor(this.toNumber()))},u.floor=function(r){return new e(r).floor()},o.ceiling=o.ceil=function(){return this.isInteger()?this.clone():new e(Math.ceil(this.toNumber()))},u.ceiling=u.ceil=function(r){return new e(r).ceil()},o.round=function(){return this.isInteger()?this.clone():new e(Math.round(this.toNumber()))},u.round=function(r){return new e(r).round()},o.plus=o.add=function(r){var t=this.clone();if(r=new e(r),e.debug,e.NORMAL,-1==t.sign)return t.neg().add(r.neg()).neg();if(-1==r.sign)return t.sub(r.neg());if(t.eq(e.ZERO))return r;if(r.eq(e.ZERO))return t;if(t.isNaN()||r.isNaN()||t.isInfinite()&&r.isInfinite()&&t.eq(r.neg()))return e.NaN.clone();if(t.isInfinite())return t;if(r.isInfinite())return r;var n,a=t.min(r),i=t.max(r),o=i.operator(0),u=i.operator(1);if(i.gt(e.E_MAX_SAFE_INTEGER)||i.div(a).gt(e.MAX_SAFE_INTEGER))n=i;else if(u){if(1==u){var s=a.operator(1)?a.operator(0):Math.log10(a.operator(0));n=new e([s+Math.log10(Math.pow(10,o-s)+1),1])}}else n=new e(t.toNumber()+r.toNumber());return a=i=null,n},u.plus=u.add=function(r,t){return new e(r).add(t)},o.minus=o.sub=function(r){var t=this.clone();if(r=new e(r),e.debug,e.NORMAL,-1==t.sign)return t.neg().sub(r.neg()).neg();if(-1==r.sign)return t.add(r.neg());if(t.eq(r))return e.ZERO.clone();if(r.eq(e.ZERO))return t;if(t.isNaN()||r.isNaN()||t.isInfinite()&&r.isInfinite())return e.NaN.clone();if(t.isInfinite())return t;if(r.isInfinite())return r.neg();var n,a=t.min(r),i=t.max(r),o=r.gt(t),u=i.operator(0),s=i.operator(1);if(i.gt(e.E_MAX_SAFE_INTEGER)||i.div(a).gt(e.MAX_SAFE_INTEGER))n=i,n=o?n.neg():n;else if(s){if(1==s){var f=a.operator(1)?a.operator(0):Math.log10(a.operator(0));n=new e([f+Math.log10(Math.pow(10,u-f)-1),1]),n=o?n.neg():n}}else n=new e(t.toNumber()-r.toNumber());return a=i=null,n},u.minus=u.sub=function(r,t){return new e(r).sub(t)},o.times=o.mul=function(r){var t=e(this).clone();if(r=new e(r),e.debug,e.NORMAL,t.sign*r.sign==-1)return t.abs().mul(r.abs()).neg();if(-1==t.sign)return t.abs().mul(r.abs());if(t.isNaN()||r.isNaN()||t.eq(e.ZERO)&&r.isInfinite()||t.isInfinite()&&r.abs().eq(e.ZERO))return e.NaN.clone();if(r.eq(e.ZERO))return e.ZERO.clone();if(r.eq(e.ONE))return t.clone();if(t.isInfinite())return t;if(r.isInfinite())return r;if(t.max(r).gt(e.EE_MAX_SAFE_INTEGER))return t.max(r);var n=t*r;return n<=9007199254740991?new e(n):e.pow(10,t.log10().add(r.log10()))},u.times=u.mul=function(r,t){return new e(r).mul(t)},o.divide=o.div=function(r){var t=this.clone();if(r=new e(r),e.debug,e.NORMAL,t.sign*r.sign==-1)return t.abs().div(r.abs()).neg();if(-1==t.sign)return t.abs().div(r.abs());if(t.isNaN()||r.isNaN()||t.isInfinite()&&r.isInfinite()||t.eq(e.ZERO)&&r.eq(e.ZERO))return e.NaN.clone();if(r.eq(e.ZERO))return e.POSITIVE_INFINITY.clone();if(r.eq(e.ONE))return t.clone();if(t.eq(r))return e.ONE.clone();if(t.isInfinite())return t;if(r.isInfinite())return e.ZERO.clone();if(t.max(r).gt(e.EE_MAX_SAFE_INTEGER))return t.gt(r)?t.clone():e.ZERO.clone();var n=t/r;if(n<=9007199254740991)return new e(n);var a=e.pow(10,t.log10().sub(r.log10())),i=a.floor();return a.sub(i).lt(1e-10)?i:a},u.divide=u.div=function(r,t){return new e(r).div(t)},o.reciprocate=o.rec=function(){return e.debug,e.NORMAL,this.isNaN()||this.eq(e.ZERO)?e.NaN.clone():this.abs().gt("2e323")?e.ZERO.clone():new e(1/this)},u.reciprocate=u.rec=function(r){return new e(r).rec()},o.modular=o.mod=function(r){return(r=new e(r)).eq(e.ZERO)?e.ZERO.clone():this.sub(this.div(r).floor().mul(r))},u.modular=u.mod=function(r,t){return new e(r).mod(t)};o.gamma=function(){var r=this.clone();if(r.gt(e.TETRATED_MAX_SAFE_INTEGER))return r;if(r.gt(e.E_MAX_SAFE_INTEGER))return e.exp(r);if(r.gt(e.MAX_SAFE_INTEGER))return e.exp(e.mul(r,e.ln(r).sub(1))).mul(r.mul(e.PI).mul(2).sqrt());var t=r.operator(0);if(t>1){if(t<24)return new e(function(r){if(!isFinite(r))return r;if(r<-170)return Number.isInteger(r)?Number.NaN:0;for(var e=1;r<10;)e*=r,++r;var t=.9189385332046727;t+=(.5+--r)*Math.log(r),t-=r;var n=r*r,a=r;return t+=1/(12*a),t+=1/(360*(a*=n)),t+=1/(1260*(a*=a*n)),t+=1/(1680*(a*=n)),t+=1/(1188*(a*=n)),t+=691/(360360*(a*=n)),t+=7/(1092*(a*=n)),t+=3617/(122400*(a*=n)),Math.exp(t)/e}(r.sign*t));var n=t-1,a=.9189385332046727;a+=(n+.5)*Math.log(n);var i=n*n,o=n,u=12*o,s=1/u,f=(a-=n)+s;if(f==a)return e.exp(a);if((f=(a=f)-(s=1/(u=360*(o*=i))))==a)return e.exp(a);a=f;var l=1/(u=1260*(o*=i));return a+=l,a-=l=1/(u=1680*(o*=i)),e.exp(a)}return this.rec()},u.gamma=function(r){return new e(r).gamma()},u.factorials=[1,1,2,6,24,120,720,5040,40320,362880,3628800,39916800,479001600,6227020800,87178291200,1307674368e3,20922789888e3,355687428096e3,6402373705728e3,0x1b02b9306890000,243290200817664e4,5109094217170944e4,0x3ceea4c2b3e0d80000,2.585201673888498e22,6.204484017332394e23,1.5511210043330986e25,4.0329146112660565e26,1.0888869450418352e28,3.0488834461171387e29,8.841761993739702e30,2.6525285981219107e32,8.222838654177922e33,2.631308369336935e35,8.683317618811886e36,2.9523279903960416e38,1.0333147966386145e40,3.7199332678990125e41,1.3763753091226346e43,5.230226174666011e44,2.0397882081197444e46,8.159152832478977e47,3.345252661316381e49,1.40500611775288e51,6.041526306337383e52,2.658271574788449e54,1.1962222086548019e56,5.502622159812089e57,2.5862324151116818e59,1.2413915592536073e61,6.082818640342675e62,3.0414093201713376e64,1.5511187532873822e66,8.065817517094388e67,4.2748832840600255e69,2.308436973392414e71,1.2696403353658276e73,7.109985878048635e74,4.0526919504877214e76,2.3505613312828785e78,1.3868311854568984e80,8.32098711274139e81,5.075802138772248e83,3.146997326038794e85,1.98260831540444e87,1.2688693218588417e89,8.247650592082472e90,5.443449390774431e92,3.647111091818868e94,2.4800355424368305e96,1.711224524281413e98,1.1978571669969892e100,8.504785885678623e101,6.1234458376886085e103,4.4701154615126844e105,3.307885441519386e107,2.48091408113954e109,1.8854947016660504e111,1.4518309202828587e113,1.1324281178206297e115,8.946182130782976e116,7.156945704626381e118,5.797126020747368e120,4.753643337012842e122,3.945523969720659e124,3.314240134565353e126,2.81710411438055e128,2.4227095383672734e130,2.107757298379528e132,1.8548264225739844e134,1.650795516090846e136,1.4857159644817615e138,1.352001527678403e140,1.2438414054641308e142,1.1567725070816416e144,1.087366156656743e146,1.032997848823906e148,9.916779348709496e149,9.619275968248212e151,9.426890448883248e153,9.332621544394415e155,9.332621544394415e157,9.42594775983836e159,9.614466715035127e161,9.90290071648618e163,1.0299016745145628e166,1.081396758240291e168,1.1462805637347084e170,1.226520203196138e172,1.324641819451829e174,1.4438595832024937e176,1.588245541522743e178,1.7629525510902446e180,1.974506857221074e182,2.2311927486598138e184,2.5435597334721877e186,2.925093693493016e188,3.393108684451898e190,3.969937160808721e192,4.684525849754291e194,5.574585761207606e196,6.689502913449127e198,8.094298525273444e200,9.875044200833601e202,1.214630436702533e205,1.506141741511141e207,1.882677176888926e209,2.372173242880047e211,3.0126600184576594e213,3.856204823625804e215,4.974504222477287e217,6.466855489220474e219,8.47158069087882e221,1.1182486511960043e224,1.4872707060906857e226,1.9929427461615188e228,2.6904727073180504e230,3.659042881952549e232,5.012888748274992e234,6.917786472619489e236,9.615723196941089e238,1.3462012475717526e241,1.898143759076171e243,2.695364137888163e245,3.854370717180073e247,5.5502938327393044e249,8.047926057471992e251,1.1749972043909107e254,1.727245890454639e256,2.5563239178728654e258,3.80892263763057e260,5.713383956445855e262,8.62720977423324e264,1.3113358856834524e267,2.0063439050956823e269,3.0897696138473508e271,4.789142901463394e273,7.471062926282894e275,1.1729568794264145e278,1.853271869493735e280,2.9467022724950384e282,4.7147236359920616e284,7.590705053947219e286,1.2296942187394494e289,2.0044015765453026e291,3.287218585534296e293,5.423910666131589e295,9.003691705778438e297,1.503616514864999e300,2.5260757449731984e302,4.269068009004705e304,7.257415615307999e306],o.factorial=o.fact=function(){var r=this.clone(),t=e.factorials;if(r.lt(e.ZERO)||!r.isint())return r.add(1).gamma();if(r.lte(170))return new e(t[+r]);var n=r.gt(e.MAX_SAFE_INTEGER)?1:new e(1).add(r.rec().div(12)).add(r.pow(2).rec().div(288)).sub(r.pow(3).rec().mul(139).div(51840)).sub(r.pow(4).rec().mul(571).div(2488320)).add(r.pow(5).rec().mul(163879).div(209018880));return r.div(e.E).pow(r).mul(r.mul(e.PI).mul(2).sqrt()).mul(n)},u.factorial=u.fact=function(r){return new e(r).fact()},o.toPower=o.pow=function(r){r=new e(r);var t=this.clone();if(e.debug,e.NORMAL,r.eq(e.ZERO))return e.ONE.clone();if(r.eq(e.ONE))return t.clone();if(r.lt(e.ZERO))return t.pow(r.neg()).rec();if(t.lt(e.ZERO)&&r.isint())return r.mod(2).lt(e.ONE)?t.abs().pow(r):t.abs().pow(r).neg();if(t.lt(e.ZERO))return e.NaN.clone();if(t.eq(e.ONE))return e.ONE.clone();if(t.eq(e.ZERO))return e.ZERO.clone();if(t.max(r).gt(e.TETRATED_MAX_SAFE_INTEGER))return t.max(r);if(t.eq(10))return r.gt(e.ZERO)?(r.operator(1,r.operator(1)+1||1),r.standardize(),r):new e(Math.pow(10,r));if(r.lt(e.ONE))return t.root(r.rec());var n=Math.pow(t,r);return n<=9007199254740991?new e(n):e.pow(10,t.log10().mul(r))},u.toPower=u.pow=function(r,t){return new e(r).pow(t)},o.exponential=o.exp=function(){return e.pow(Math.E,this)},u.exponential=u.exp=function(r){return e.pow(Math.E,r)},o.squareRoot=o.sqrt=function(){return this.root(2)},u.squareRoot=u.sqrt=function(r){return new e(r).root(2)},o.cubeRoot=o.cbrt=function(){return this.root(3)},u.cubeRoot=u.cbrt=function(r){return new e(r).root(3)},o.root=function(r){return r=new e(r),e.debug,e.NORMAL,r.eq(e.ONE)?this.clone():r.lt(e.ZERO)?this.root(r.neg()).rec():r.lt(e.ONE)?this.pow(r.rec()):this.lt(e.ZERO)&&r.isint()&&r.mod(2).eq(e.ONE)?this.neg().root(r).neg():this.lt(e.ZERO)?e.NaN.clone():this.eq(e.ONE)?e.ONE.clone():this.eq(e.ZERO)?e.ZERO.clone():this.max(r).gt(e.TETRATED_MAX_SAFE_INTEGER)?this.gt(r)?this.clone():e.ZERO.clone():e.pow(10,this.log10().div(r))},u.root=function(r,t){return new e(r).root(t)},o.generalLogarithm=o.log10=function(){var r=this.clone();return e.debug,e.NORMAL,r.lt(e.ZERO)?e.NaN.clone():r.eq(e.ZERO)?e.NEGATIVE_INFINITY.clone():r.lt(9007199254740991)?new e(Math.log10(r.toNumber())):r.isFinite()?r.gt(e.TETRATED_MAX_SAFE_INTEGER)?r:(r.operator(1,r.operator(1)-1),r.standardize()):r},u.generalLogarithm=u.log10=function(r){return new e(r).log10()},o.logarithm=o.logBase=function(r){return void 0===r&&(r=Math.E),this.log10().div(e.log10(r))},u.logarithm=u.logBase=function(r,t){return new e(r).logBase(t)},o.naturalLogarithm=o.log=o.ln=function(){return this.logBase(Math.E)},u.naturalLogarithm=u.log=u.ln=function(r){return new e(r).ln()};function f(r){if("object"!=typeof r)throw new Error(t+"Object expected");var e,a,i,o=["rounding",0,8,"maxOps",1,4294967295,"debug",0,2];for(e=0;e<o.length;e+=3)if(void 0!==(i=r[a=o[e]])){if(!(Number.isInteger(i)&&i>=o[e+1]&&i<=o[e+2]))throw new Error(n+a+": "+i);this[a]=i}return this}o.lambertw=function(){var r=this.clone();return r.isNaN()?r:r.lt(-.3678794411710499)?e.NaN.clone():r.gt(e.TETRATED_MAX_SAFE_INTEGER)?r:r.gt(e.EE_MAX_SAFE_INTEGER)?(r.operator(1,r.operator(1)-1),r):r.gt(e.MAX_SAFE_INTEGER)?function(r,t){var n,a,i,o;if(void 0===t&&(t=1e-10),!(r=new e(r)).isFinite())return r;if(0===r)return r;if(1===r)return.567143290409784;n=e.ln(r);for(var u=0;u<100;++u){if(a=e.exp(-n),i=n.sub(r.mul(a)),o=n.sub(i.div(n.add(e.ONE).sub(n.add(2).mul(i).div(e.mul(2,n).add(2))))),e.abs(o.sub(n)).lt(e.abs(o).mul(t)))return o;n=o}throw new Error("Iteration failed to converge: "+r)}(r):new e(function(r,e){var t,n;if(void 0===e&&(e=1e-12),!Number.isFinite(r))return r;if(0===r)return r;if(1===r)return.567143290409784;t=r<10?0:Math.log(r)-Math.log(Math.log(r));for(var a=0;a<100;++a){if(n=(r*Math.exp(-t)+t*t)/(t+1),Math.abs(n-t)<e*Math.abs(n))return n;t=n}throw new Error("Iteration failed to converge: "+r)}(r.sign*r.operator(0)))},u.lambertw=function(r){return new e(r).lambertw()},o.tetrate=o.tetr=function(r){var t=this.clone();if(r=new e(r),e.debug,e.NORMAL,r.isInfinite()&&r.sign>0)return t.lt(Math.exp(-Math.E))?e.NaN.clone():t.gt(Math.exp(1/Math.E))?e.POSITIVE_INFINITY.clone():(n=t.ln().neg()).lambertw().div(n);if(r.lte(-2))return e.NaN.clone();if(t.eq(e.ZERO))return r.eq(e.ZERO)?e.NaN.clone():r.mod(2).eq(e.ZERO)?e.ZERO.clone():e.ONE.clone();if(t.eq(e.ONE))return r.eq(e.ONE.neg())?e.NaN.clone():e.ONE.clone();if(r.eq(e.ONE.neg()))return e.ZERO.clone();if(r.eq(e.ZERO))return e.ONE.clone();if(r.eq(e.ONE))return t;if(r.eq(2))return t.pow(t);if(t.eq(2)){if(r.eq(3))return new e(16);if(r.eq(4))return new e(65536)}if((l=t.max(r)).gt("10^^^9007199254740991"))return l;if(r.gt(e.MAX_SAFE_INTEGER)){var n;if(this.gte(Math.exp(-Math.E))&&this.lte(Math.exp(1/Math.E)))return(n=t.ln().neg()).lambertw().div(n);var a=t.slog(10).add(r);return a.operator(2,(r.operator(2)||0)+1),a.standardize(),a}for(var i=r.toNumber(),o=Math.floor(i),u=t.pow(i-o),s=e.NaN,f=0,l=new e("e9007199254740991");0!==o&&u.lt(l)&&f<100;++f)if(o>0){if(u=t.pow(u),s.eq(u)){o=0;break}s=u,--o}else{if(u=u.logBase(t),s.eq(u)){o=0;break}s=u,++o}return(100==f||this.lt(Math.exp(1/Math.E)))&&(o=0),u.operator(1,u.operator(1)+o||o),u.standardize(),u},u.tetrate=u.tetr=function(r,t){return new e(r).tetr(t)},o.ssqrt=o.ssrt=function(){var r=this.clone();if(r.lt(Math.exp(-1/Math.E)))return e.NaN.clone();if(!r.isFinite())return r;if(r.gt(e.TETRATED_MAX_SAFE_INTEGER))return r;if(r.gt(e.EE_MAX_SAFE_INTEGER))return r.operator(1,r.operator(1)-1),r;var t=r.ln();return t.div(t.lambertw())},u.ssqrt=u.ssrt=function(r){return new e(r).ssqrt()},o.slog=function(r){void 0===r&&(r=10);var t=this.clone();if(r=new e(r),t.isNaN()||r.isNaN()||t.isInfinite()&&r.isInfinite())return e.NaN.clone();if(t.isInfinite())return t;if(r.isInfinite())return e.ZERO.clone();if(t.lt(e.ZERO))return e.ONE.neg();if(t.eq(e.ONE))return e.ZERO.clone();if(t.eq(r))return e.ONE.clone();if(r.gte(Math.exp(-Math.E))&&r.lte(Math.exp(1/Math.E))){var n=e.tetr(r,1/0);if(t.eq(n))return e.POSITIVE_INFINITY.clone();if(t.gt(n))return e.NaN.clone()}if(t.max(r).gt("10^^^9007199254740991"))return t.gt(r)?t:e.ZERO.clone();if(t.max(r).gt(e.TETRATED_MAX_SAFE_INTEGER))return t.gt(r)?(t.operator(2,t.operator(2)-1),t.standardize(),t.sub(t.operator(1))):e.ZERO.clone();var a=0,i=(t.operator(1)||0)-(r.operator(1)||0);if(i>3){var o=i-3;a+=o,t.operator(1,t.operator(1)-o)}for(var u=0;u<100;++u)if(t.lt(e.ZERO))t=e.pow(r,t),--a;else{if(t.lte(1))return new e(a+t.toNumber()-1);++a,t=e.logBase(t,r)}return t.gt(10)?new e(a):void 0},u.slog=function(r,t){return new e(r).slog(e(t))},o.pentate=o.pent=function(r){return this.arrow(3)(r)},u.pentate=u.pent=function(r,t){return e.arrow(r,3,t)},o.arrow=function(r){var t=this.clone();return!(r=new e(r)).isint()||r.lt(e.ZERO)?function(r){return e.NaN.clone()}:r.eq(e.ZERO)?function(r){return t.mul(r)}:r.eq(e.ONE)?function(r){return t.pow(r)}:r.eq(2)?function(r){return t.tetr(r)}:function(n){var a,i;if(a=2==arguments.length?arguments[1]:0,n=new e(n),e.debug,e.NORMAL,n.lt(e.ZERO))return e.NaN.clone();if(n.eq(e.ZERO))return e.ONE.clone();if(n.eq(e.ONE))return t.clone();if(r.gt(e.MAX_SAFE_INTEGER))return(i=r.clone()).layer++,i;if(n.eq(2))return t.arrow(r-1)(t,a+1);if(t.max(n).gt("10{"+r.add(e.ONE)+"}9007199254740991"))return t.max(n);if(n.gt(e.MAX_SAFE_INTEGER)){t.gt("10{"+r+"}9007199254740991")?((i=t.clone()).operator(r,i.operator(r)-1),i.standardize()):i=t.gt("10{"+r.sub(e.ONE)+"}9007199254740991")?new e(i.operator(r)):e.ZERO;var o=i.add(n);return o.operator(r,(n.operator(r)||0)+1),o.standardize(),o}if(a>=e.maxOps+10)return new e([[0,10],[Number(r),1]]);var u=n.toNumber(),s=Math.floor(u);i=t.arrow(r.sub(1))(u-s,a+1);for(var f=0,l=new e("10{"+r.sub(e.ONE)+"}9007199254740991");0!==s&&i.lt(l)&&f<100;++f)s>0&&(i=t.arrow(r.sub(e.ONE))(i,a+1),--s);return 100==f&&(s=0),i.operator(Number(r.sub(e.ONE)),i.operator(Number(r.sub(e.ONE)))+s||s),i.standardize(),i}},o.chain=function(r,e){return this.arrow(e)(r)},u.arrow=function(r,t,n){return new e(r).arrow(t)(n)},u.chain=function(r,t,n){return new e(r).arrow(n)(t)},u.hyper=function(r){return(r=new e(r)).eq(e.ZERO)?function(r,t){return new e(t).eq(e.ZERO)?new e(r):new e(r).add(e.ONE)}:r.eq(e.ONE)?function(r,t){return e.add(r,t)}:function(t,n){return new e(t).arrow(r.sub(2))(n)}},o.expansion=function(r){var t,n=this.clone();if(r=new e(r),e.debug,e.NORMAL,r.lte(e.ZERO)||!r.isint())return e.NaN.clone();if(r.eq(e.ONE))return n.clone();if(!n.isint())return e.NaN.clone();if(n.eq(2))return new e(4);if(r.gt(e.MAX_SAFE_INTEGER))return e.POSITIVE_INFINITY.clone();var a=r-1;t=n;for(var i=0;0!==a&&t.lt(e.MAX_SAFE_INTEGER)&&i<100;++i)a>0&&(t=n.arrow(t)(n),--a);return 100==i&&(a=0),t.layer+=a,t.standardize(),t},u.expansion=function(r,t){return new e(r).expansion(t)},u.affordGeometricSeries=function(r,t,n,a){r=new e(r),t=new e(t),n=new e(n);var i=t.mul(n.pow(a));return e.floor(r.div(i).mul(n.sub(e.ONE)).add(e.ONE).log10().div(n.log10()).mul(1+1e-12))},u.affordArithmeticSeries=function(r,t,n,a){r=new e(r),t=new e(t),n=new e(n),a=new e(a);var i=t.add(a.mul(n)).sub(n.div(2)),o=i.pow(2);return i.neg().add(o.add(n.mul(r).mul(2)).sqrt()).div(n).mul(1+1e-12).floor()},u.sumGeometricSeries=function(r,t,n,a){return t=new e(t),n=new e(n),t.mul(n.pow(a)).mul(e.sub(e.ONE,n.pow(r))).div(e.sub(e.ONE,n))},u.sumArithmeticSeries=function(r,t,n,a){r=new e(r),t=new e(t),a=new e(a);var i=t.add(a.mul(n));return r.div(2).mul(i.mul(2).plus(r.sub(e.ONE).mul(n)))},u.choose=function(r,t){return new e(r).factorial().div(new e(t).factorial().mul(new e(r).sub(new e(t)).factorial()))},o.choose=function(r){return e.choose(this,r)},o.standardize=function(){var r,t=this;if(e.debug,e.ALL,t.array&&t.array.length||(t.array=[[0,0]]),1!=t.sign&&-1!=t.sign&&("number"!=typeof t.sign&&(t.sign=Number(t.sign)),t.sign=t.sign<0?-1:1),t.layer>9007199254740991)return t.array=[[0,1/0]],t.layer=0,t;for(var n=0;n<t.array.length;++n){var a=t.array[n];if(null!==a[0]&&void 0!==a[0]||(a[0]=0),0===a[0]||0!==a[1]&&null!==a[1]&&void 0!==a[1]){if(isNaN(a[0])||isNaN(a[1]))return t.array=[[0,NaN]],t;if(!isFinite(a[0])||!isFinite(a[1]))return t.array=[[0,1/0]],t}else t.array.splice(n,1),--n}do{for(e.debug,e.ALL,r=!1,t.array.sort(function(r,e){return r[0]>e[0]?1:r[0]<e[0]?-1:0});t.array.length>e.maxOps;)t.array.shift();if(t.array.length||(t.array=[[0,0]]),t.array[t.array.length-1][0]>9007199254740991)t.layer++,t.array=[[0,t.array[t.array.length-1][0]]],r=!0;else if(t.layer&&1==t.array.length&&0===t.array[0][0])t.layer--,t.array=[[0,10],[t.array[0][1],1]],r=!0;else{for(t.array.length<e.maxOps&&0!==t.array[0][0]&&t.array.unshift([0,10]),n=0;n<t.array.length-1;++n)t.array[n][0]==t.array[n+1][0]&&(t.array[n][1]+=t.array[n+1][1],t.array.splice(n+1,1),--n,r=!0);for(0===t.array[0][0]&&t.array[0][1]>9007199254740991&&(t.array.length>=2&&1==t.array[1][0]?t.array[1][1]++:t.array.splice(1,0,[1,1]),t.array[0][1]=Math.log10(t.array[0][1]),r=!0);t.array.length>=2&&0===t.array[0][0]&&t.array[0][1]<=i&&1==t.array[1][0]&&t.array[1][1];)t.array[0][1]=Math.pow(10,t.array[0][1]),t.array[1][1]>1?t.array[1][1]--:t.array.splice(1,1),r=!0;for(;t.array.length>=2&&0===t.array[0][0]&&1==t.array[0][1]&&t.array[1][1];)t.array[1][1]>1?t.array[1][1]--:t.array.splice(1,1),t.array[0][1]=10;for(t.array.length>=2&&0===t.array[0][0]&&1!=t.array[1][0]&&(t.array[0][1]&&t.array.splice(1,0,[t.array[1][0]-1,t.array[0][1]]),t.array[0][1]=1,t.array[2][1]>1?t.array[2][1]--:t.array.splice(2,1),r=!0),n=1;n<t.array.length;++n)t.array[n][1]>9007199254740991&&(n!=t.array.length-1&&t.array[n+1][0]==t.array[n][0]+1?t.array[n+1][1]++:t.array.splice(n+1,0,[t.array[n][0]+1,1]),0===t.array[0][0]?t.array[0][1]=t.array[n][1]+1:t.splice(0,0,[0,t.array[n][1]+1]),t.splice(1,n),r=!0)}}while(r);return t.array.length||(t.array=[[0,0]]),t},o.toNumber=function(){return-1==this.sign?-this.abs():this.array.length>=2&&(this.array[1][0]>=2||this.array[1][1]>=2||1==this.array[1][1]&&this.array[0][1]>Math.log10(Number.MAX_VALUE))?1/0:this.array.length>=2&&1==this.array[1][1]?Math.pow(10,this.array[0][1]):this.array[0][1]},o.toString=function(){if(-1==this.sign)return"-"+this.abs();if(isNaN(this.array[0][1]))return"NaN";if(!isFinite(this.array[0][1]))return"Infinity";var r="";if(this.layer?this.layer<3?r+="J".repeat(this.layer):r+="J^"+this.layer+" ":r+="",this.array.length>=3||2==this.array.length&&this.array[1][0]>=2)for(var e=this.array.length-1;e>=1;--e){var t=this.array[e],n=t[0]>=5?"{"+t[0]+"}":"^".repeat(t[0]);t[1]>1?r+="(10"+n+")^"+t[1]+" ":1==t[1]&&(r+="10"+n)}var a=this.array[0][1],i=this.array.length<=1?0:1==this.array[1][0]?this.array[1][1]:0;return r+=i?i<3?"e".repeat(i-1)+Math.pow(10,a-Math.floor(a))+"e"+Math.floor(a):i<8?"e".repeat(i)+a:"(10^)^"+i+" "+a:String(a)},o.toJSON=function(){for(var r=[],e=0;e<this.array.length;++e)r.push([this.array[e][0],this.array[e][1]]);return{array:r,layer:this.layer,sign:this.sign}},o.toHyperE=function(){if(this.layer)throw new Error(t+"Sorry, but this prototype doesn't support correct Hyper-E notation for numbers larger than 10{MSI}10");if(-1==this.sign)return"-"+this.abs().toHyperE();if(isNaN(this.array[0][1]))return"NaN";if(!isFinite(this.array[0][1]))return"Infinity";if(this.lt(9007199254740991))return String(this.array[0][1]);if(this.lt("e9007199254740991"))return"E"+this.array[0][1];for(var r="E"+this.array[0][1]+"#"+this.array[1][1],e=2;e<this.array.length;++e)r+="#"+(this.array[e][1]+1);return r},u.fromNumber=function(r){if("number"!=typeof r)throw new Error(n+"Expected Number");var t=new e;return t.array[0][1]=Math.abs(r),t.sign=r<0?-1:1,t.standardize(),t},u.fromString=function(r){if("string"!=typeof r)throw new Error(n+"Expected String");var t=!1;if("string"==typeof r&&("["==r[0]||"{"==r[0]))try{JSON.parse(r)}finally{t=!0}if(t)return e.fromJSON(r);var o=new e;if(o.array=[[0,0]],!a.test(r))return o.array=[[0,NaN]],o;var u=!1;if("-"==r[0]||"+"==r[0]){var s=r.search(/[^-\+]/);u=r.substring(0,s).match(/-/g).length%2==1,r=r.substring(s)}if("NaN"==r)o.array=[[0,NaN]];else if("Infinity"==r)o.array=[[0,1/0]];else{var f,l,h,c,y;for("J"==r[0]&&("^"==r[1]?(f=r.substring(2).search(/[^0-9]/)+2,o.layer=Number(r.substring(2,f)),r=r.substring(f+1)):(f=r.search(/[^J]/),o.layer=f,r=r.substring(f)));r&&/^\(?10[\^\{]/.test(r);){var g;"("==r[0]&&(r=r.substring(1)),"^"==r[2]?(g=f=r.substring(2).search(/[^\^]/),l=f+2):(f=r.indexOf("}"),g=Number(r.substring(3,f)),l=f+1),")"==(r=r.substring(l))[0]?(f=r.indexOf(" "),h=Number(r.substring(2,f)),r=r.substring(f+1)):h=1,1==g?o.array.length>=2&&1==o.array[1][0]?o.array[1][1]+=h:o.array.splice(1,0,[1,h]):2==g?(f=o.array.length>=2&&1==o.array[1][0]?o.array[1][1]:0,(l=o.array[0][1])>=1e10&&++f,l>=10&&++f,o.array[0][1]=f,o.array.length>=2&&1==o.array[1][0]&&o.array.splice(1,1),c=o.getOperatorIndex(2),Number.isInteger(c)?o.array[c][1]+=h:o.array.splice(Math.ceil(c),0,[2,h])):(f=o.operator(g-1),(l=o.operator(g-2))>=10&&++f,c=o.getOperatorIndex(g),o.array.splice(1,Math.ceil(c)-1),o.array[0][1]=f,Number.isInteger(c)?o.array[1][1]+=h:o.array.splice(1,1,[g,h]))}for(f=r.split(/[Ee]/),l=[o.array[0][1],0],h=1,y=f.length-1;y>=0;--y)c=f[y]?Number(f[y]):1,l[0]<i&&0===l[1]?l[0]=Math.pow(10,h*l[0]):-1==h?(0===l[1]?l[0]=Math.pow(10,h*l[0]):1==l[1]&&l[0]<=Math.log10(Number.MAX_VALUE)?l[0]=Math.pow(10,h*Math.pow(10,l[0])):l[0]=0,l[1]=0):l[1]++,0===l[1]?l[0]*=Number(c):1==l[1]?l[0]+=Math.log10(Number(c)):2==l[1]&&l[0]<i+Math.log10(Math.log10(Number(c)))&&(l[0]+=Math.log10(1+Math.pow(10,Math.log10(Math.log10(Number(c)))-l[0]))),l[0]<i&&l[1]?(l[0]=Math.pow(10,l[0]),l[1]--):l[0]>9007199254740991&&(l[0]=Math.log10(l[0]),l[1]++);o.array[0][1]=l[0],l[1]&&(o.array.length>=2&&1==o.array[1][0]?o.array[1][1]+=l[1]:o.array.splice(1,0,[1,l[1]]))}return u&&(o.sign*=-1),o.standardize(),o},u.fromArray=function(r,t,a){var i,o;if(!(r instanceof Array)||void 0!==t&&"number"!=typeof t||void 0!==a&&"number"!=typeof a)if("number"==typeof r&&t instanceof Array&&(void 0===a||"number"==typeof a))i=t,o=r,a||0;else{if(!("number"==typeof r&&"number"==typeof t&&a instanceof Array))throw new Error(n+"Expected an Array [and 1 or 2 Number]");i=a,o=r,t}else i=r,o=t,a||0;var u,s=new e;if(i.length)if("number"==typeof i[0])for(s.array=[],u=0;u<i.length;u++){if("number"!=typeof i[u])throw new Error(n+"Expected Array of Number");s.array.push([u,i[u]])}else{if(!(i[0]instanceof Array))throw new Error(n+"Expected Array of Number or Array of pair of Number");for(s.array=[],u=0;u<i.length;u++){if(!(i[u]instanceof Array)||"number"!=typeof i[u][0]||"number"!=typeof i[u][1])throw new Error(n+"Expected Array of pair of Number");s.array.push([i[u][0],i[u][1]])}}else s.array=[[0,0]];return s.sign=o?Number(o):1,s.standardize(),s},u.fromObject=function(r){if("object"!=typeof r)throw new Error(n+"Expected Object");if(null===r)return e.ZERO.clone();if(r instanceof Array)return e.fromArray(r);if(r instanceof e)return new e(r);if(!(r.array instanceof Array))throw new Error(n+"Expected that property 'array' exists");if(void 0!==r.sign&&"number"!=typeof r.sign)throw new Error(n+"Expected that property 'sign' is Number");if(void 0!==r.layer&&"number"!=typeof r.layer)throw new Error(n+"Expected that property 'layer' is Number");var t=new e;t.array=[];for(var a=0;a<r.array.length;a++)t.array.push(r.array[a].slice(0));return t.sign=Number(r.sign)||1,t.layer=Number(r.layer)||0,t.standardize(),t},u.fromJSON=function(r){if("string"!=typeof r)throw new Error(n+"Expected String");var t,a;try{t=JSON.parse(r)}catch(r){throw t=null,r}finally{a=e.fromObject(t)}return t=null,a},u.fromHyperE=function(r){if("string"!=typeof r)throw new Error(n+"Expected String");var t=new e;if(t.array=[[0,0]],!/^[-\+]*(0|[1-9]\d*(\.\d*)?|Infinity|NaN|E[1-9]\d*(\.\d*)?(#[1-9]\d*)*)$/.test(r))return t.array=[[0,NaN]],t;var a=!1;if("-"==r[0]||"+"==r[0]){var i=r.search(/[^-\+]/);a=r.substring(0,i).match(/-/g).length%2==0,r=r.substring(i)}if("NaN"==r)t.array=[[0,NaN]];else if("Infinity"==r)t.array=[[0,1/0]];else if("E"!=r[0])t.array[0][1]=Number(r);else if(-1==r.indexOf("#"))t.array[0][1]=Number(r.substring(1)),t.array[1]=[1,1];else for(var o=r.substring(1).split("#"),u=0;u<o.length;++u){var s=Number(o[u]);u>=2&&--s,t.array[u]=[u,s]}return a&&(t.sign*=-1),t.standardize(),t},o.getOperatorIndex=function(r){if("number"!=typeof r&&(r=Number(r)),!isFinite(r))throw new Error(n+"Index out of range.");var e=this.array,t=0,a=e.length-1;if(e[a][0]<r)return a+.5;if(e[t][0]>r)return-.5;for(;t!=a;){if(e[t][0]==r)return t;if(e[a][0]==r)return a;var i=Math.floor((t+a)/2);if(e[i][0]==r){t=i;break}e[i][0]<r&&(i=i),e[i][0]>r&&(a=i)}return e[t][0]==r?t:t+.5},o.getOperator=function(r){if("number"!=typeof r&&(r=Number(r)),!isFinite(r))throw new Error(n+"Index out of range.");var e=this.getOperatorIndex(r);return Number.isInteger(e)?this.array[e][1]:0===r?10:0},o.setOperator=function(r,e){if("number"!=typeof r&&(r=Number(r)),!isFinite(r))throw new Error(n+"Index out of range.");var t=this.getOperatorIndex(r);Number.isInteger(t)?this.array[t][1]=e:(t=Math.ceil(t),this.array.splice(t,0,[r,e])),this.standardize()},o.operator=function(r,e){if(void 0===e)return this.getOperator(r);this.setOperator(r,e)},o.clone=function(){return new e(this)},function(r){for(var t in s)Object.defineProperty(r,t,{configurable:!1,enumerable:!1,writable:!1,value:new e(s[t])})}(e=function r(e){var t,n,a;function i(r,e){var t=this;if(!(t instanceof i))return new i(r,e);var n,a,o,u=null;if("string"==typeof r&&("["==r[0]||"{"==r[0]))try{u=JSON.parse(r)}catch(r){}if("number"!=typeof r||e instanceof Array)if(u)n=i.fromObject(u);else if("string"==typeof r&&"E"==r[0])n=i.fromHyperE(r);else if("string"==typeof r)n=i.fromString(r);else if(r instanceof Array||e instanceof Array)n=i.fromArray(r,e);else if(r instanceof i){n=[];for(var s=0;s<r.array.length;++s)n.push([r.array[s][0],r.array[s][1]]);a=r.sign,o=r.layer}else"object"==typeof r?n=i.fromObject(r):(n=[[0,NaN]],a=1,o=0);else n=i.fromNumber(r);return void 0===a?(t.array=n.array,t.sign=n.sign,t.layer=n.layer):(t.array=n,t.sign=a,t.layer=o),t}for(var s in i.prototype=o,i.prototype.constructor=i,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.NONE=0,i.NORMAL=1,i.ALL=2,i.clone=r,i.config=i.set=f,u)i[s]=u[s];if(void 0===e&&(e={}),e)for(a=["rounding","maxOps","debug"],t=0;t<a.length;)e.hasOwnProperty(n=a[t++])||(e[n]=this[n]);return i.config(e),i}(e)),e.default=e.ExpantaNum=e.EN=e,"function"==typeof define&&define.amd?define("ExpantaNum",[],function(){return e}):"object"==typeof module&&module.exports?module.exports=e:(r||(r="object"==typeof window&&window.window==window?window:this),r.ExpantaNum=r.EN=e)}(this);